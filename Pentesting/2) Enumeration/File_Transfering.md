# File Transfer Mechanism Enumeration
#FTP #Weakness
## FTP
### Basics
Clear-Text Protocol. Sniff away..
Anonymous
  - User:Password = Anonymous:Anonymous

Typical FTP ports
  - Port 20: Data Channel
  - Port 21: Control Channel

Active FTPing
  - Client establish conection via port 21 and informs the client-side port
Passive FTPing
  - Server announces the port for data channel. Possible bypassing client firewall since initiate the connection.

## TFTP
  - No User Auth.
  - Switches, Routers, etc may use for retrieving updates on the network.
  - UDP based
  - Common Commands
    - connect
    - get
    - put
    - quite
    - status
    - verbose

### vsFTPD
Common ftp servers on linux. Configuration usually found `/etc/vsftpd.conf`

Deny certain users access to FTP `/etc/ftpusers`. May allow some futher user gathering?


#### Look in the Config for the following Risky Settings
---
```bash
anonymous_enable=YES 	
anon_upload_enable=YES 	
anon_mkdir_write_enable=YES 	
no_anon_password=YES 	
anon_root=/home/username/ftp 	
write_enable=YES
```

Enumeration QuickStart
---
```bash
> status
> debug
> trace
> ls
> ls -R
> get somedocument.txt
> put somelocalfile2ftpserver.txt

#Download all files available
$ wget -m --no-passive ftp://anonymous:anonymous@FTPserverIP
$ sudo nmap -sV -p21 -sC
$ sudo nmap -sV -p21 -sC IPAddressHere --script-trace
```
Using TLS/SSL for FTP connecting - May give us more information(Hostname, email address)
`$ openssl s_client -connect IPAddressHere:21 -starttls ftp`
#FTP #Helpful
```bash
ftp: !cat flag.txt
```