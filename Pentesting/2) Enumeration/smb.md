# SMB/CIFS
  - Access controlled by Access Control Lists(ACL)
  - IBM Developed NetBIOS(API)
  - Configuration found typically `/etc/samba/smb.conf`
  - Dangerous Settings to look for
   ```bash
browseable = yes                  Allow listing available shares in the current share?
read only = no	                  Forbid the creation and modification of files?
writable = yes	                  Allow users to create and modify files?
guest ok = yes	                  Allow connecting to the service without using a password?
enable privileges = yes	          Honor privileges assigned to specific SID?
create mask = 0777	          What permissions must be assigned to the newly created files?
directory mask = 0777	          What permissions must be assigned to the newly created directories?
logon script = script.sh	  What script needs to be executed on the user's login?
magic script = script.sh	  Which script should be executed when the script gets closed?
magic output = script.out	  Where the output of the magic script needs to be stored?
```
#SMBClient
```bash
smbclient -N -L //IPofSMBSambaServer
smbclient ////IPofSMBSambaServer/sharetologinto
\> get xxxx.txt
Run Local Command without new terminal or exiting
\> !ls
\> !cat xxxx.txt

$ sudo nmap $IP -sV -sC -p139,445
```

#RPCclient
```bash
$ rpcclient -U "" $IP
srvinfo 	                Server information.
enumdomains 	                Enumerate all domains that are deployed in the network.
querydominfo 	                Provides domain, server, and user information of deployed domains.
netshareenumall 	        Enumerates all available shares.
netsharegetinfo <share> 	Provides information about a specific share.
enumdomusers 	                Enumerates all domain users.
queryuser <RID> 	        Provides information about a specific user.


Example Usage:
$> srvinfo
$> enumdomains
$> querydominfo
$> netshareenumall
$> netsharegetinfo share
$> enumdomusers
$> queryuser hexofuser
$> querygroup hexofgroup
```
